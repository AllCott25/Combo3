<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallpaper Animation Test</title>
    <style>
        body { margin: 0; padding: 0; background: #F5F1E8; }
        #test-info { position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; font-family: monospace; z-index: 1000; }
    </style>
</head>
<body>
    <div id="test-info">
        <h3>Wallpaper Animation Test</h3>
        <div id="status">Loading...</div>
        <div id="debug"></div>
    </div>
    
    <!-- P5.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.js"></script>
    <!-- Animation Script -->
    <script src="js/animation.js"></script>
    
    <script>
        let wallpaperHighResImage;
        let wallpaperImageReady = false;
        let wallpaperAnimation;
        let wallpaperAnimationActive = false;
        
        function preload() {
            console.log("Loading test wallpaper...");
            wallpaperHighResImage = loadImage('assets/wallpaper1_test.svg', 
                function() {
                    console.log("‚úÖ Test wallpaper loaded successfully!");
                    wallpaperImageReady = true;
                },
                function() {
                    console.log("‚ùå Failed to load test wallpaper");
                }
            );
        }
        
        function setup() {
            createCanvas(windowWidth, windowHeight);
            console.log("Canvas created:", width, "x", height);
        }
        
        function draw() {
            background(COLORS.background);
            
            // Update status display
            document.getElementById('status').innerHTML = `
                Image Ready: ${wallpaperImageReady}<br>
                Animation Active: ${wallpaperAnimationActive}<br>
                Animation State: ${wallpaperAnimation ? wallpaperAnimation.state : 'none'}<br>
                Progress: ${wallpaperAnimation ? wallpaperAnimation.progress.toFixed(2) : 'N/A'}
            `;
            
            // Initialize animation if image is ready
            if (wallpaperHighResImage && wallpaperImageReady) {
                if (!wallpaperAnimation) {
                    wallpaperAnimation = new WallpaperAnimation();
                    wallpaperAnimationActive = true;
                    console.log("üé≠ Test animation created");
                }
                
                wallpaperAnimation.update();
                
                // Start split reveal after 1 second
                if (frameCount > 30 && wallpaperAnimation.state === 'STATIC') {
                    wallpaperAnimation.startSplitReveal();
                }
                
                wallpaperAnimation.draw();
                
                if (wallpaperAnimation.state === 'COMPLETE') {
                    wallpaperAnimationActive = false;
                    console.log("üéâ Test animation complete");
                }
            } else {
                fill(255);
                textAlign(CENTER, CENTER);
                textSize(18);
                text("Loading test wallpaper...", width/2, height/2);
            }
        }
        
        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
        
        // Define COLORS for the test
        const COLORS = {
            background: '#F5F1E8',
            primary: '#8B4513',
            secondary: '#D2691E',
            tertiary: '#FFD700'
        };
    </script>
</body>
</html> 